Here’s how you can convert the provided JavaScript function calculateAge into Python. The conversion will utilize Python's datetime module to handle date operations. Here’s the equivalent Python code:
python
from datetime import datetime

def calculate_age(birth_date_string: str) -> int:
    """ 
    Calculates the age based on the provided birth date string.

    Args:
        birth_date_string (str): The birth date in string format (e.g., "YYYY-MM-DD").

    Returns:
        int: The calculated age or an error message if the date format is invalid.
    """
    try:
        # Parse the birth date string into a datetime object
        birth_date = datetime.strptime(birth_date_string, "%Y-%m-%d")
    except ValueError:
        return "Invalid date format. Please enter a valid date."

    # Get the current date
    today = datetime.now()

    # Calculate the age
    age = today.year - birth_date.year
    month_difference = today.month - birth_date.month

    # Adjust age if the current month is before the birth month
    # or if it's the birth month and the current date is before the birth date
    if month_difference < 0 or (month_difference == 0 and today.day < birth_date.day):
        age -= 1

    return age
Explanation:
Imports:
The datetime module is imported to handle date and time.
Function Definition:
The function calculate_age takes a string parameter birth_date_string, which is expected to be in the format YYYY-MM-DD.
Date Parsing:
The strptime method is used to parse the birth date string into a datetime object. If the string is not in a valid format, a ValueError will be raised, and the function will return an error message.
Current Date:
The current date is obtained using datetime.now().
Age Calculation:
The initial age is calculated by subtracting the birth year from the current year.
The month difference is then calculated to determine if the birthday has occurred yet in the current year. If not, the age is decremented by 1.
Return Value:
Finally, the calculated age is returned.
Usage Example:
You can use the function like this:
python
print(calculate_age("1990-05-15"))  # Outputs the age based on the current date
print(calculate_age("invalid-date"))  # Outputs: Invalid date format. Please enter a valid date.
This code will properly handle valid date strings and return appropriate error messages for invalid inputs.